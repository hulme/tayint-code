function pause(){
   read -p "$*"
}

#function to pause the program when output the user wants to see is displayed

#--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

HOMdir=$(pwd)

echo -e "A program to analytically approximate finite scalar loop integrals \n" 

cd ..
Dvar1=$(pwd)
cd 
cd $HOMdir

#Ask the user for input

echo -n "Enter the epilson order as an integer and press [ENTER] : "
read EPSvar1

EPSvar2="epstothe${EPSvar1}"

cd $Dvar1 
cd numerics 
cd together 
cd $EPSvar2
Dvar2=$(pwd)

cd $HOMdir

echo -n "Enter the name of the integral and press [ENTER] : "
read NAMEvar1

echo -n "Enter the list of scales, the one you want to vary FIRST, and press [ENTER] : "
read KINEvar1

echo -n "Enter the list of masses and press [ENTER] : "
read KINEvar2

echo -n "Enter the list of values for the scales you want to fix and press [ENTER] : "
read KINEvar3 

echo -n "Enter the list of values for the masses you want to fix and press [ENTER] : "
read KINEvar4 

echo -n "Enter the start stop step for the scale you want to vary and press [ENTER] : "
read KINEvar5 KINEvar6 KINEvar7

EUCtag="$(echo $KINEvar7 | head -c 2)"

echo -n "Enter the list of Feynman parameters, in ascending order, and press [ENTER] : "
read FEYNvar1

cd $Dvar2

shopt -s nullglob

for ext in m; do 
  SECvar1=( *."$ext" )
done


echo -n "The total number of iterated sectors is ${#SECvar1[@]}. Enter   the sector you want to calculate and press [ENTER]:  "
read SECvar2

cd $HOMdir
mkdir Thresholds 
cd Thresholds
Dvar4=$(pwd)
cd $HOMdir 

cd $HOMdir
mkdir calc 
cd calc
mkdir MINKOT
cd MINKOT
mkdir $SECvar2 
cd $SECvar2 
mkdir $EPSvar2 
cd $EPSvar2
Dvar3=$(pwd)
cd $HOMdir 

cd $HOMdir
mkdir OTalgo 
cd OTalgo 
mkdir $SECvar2 
cd $SECvar2 
mkdir $EPSvar2 
cd $EPSvar2
Dvar4=$(pwd)
cd $HOMdir 

cd $HOMdir
mkdir OTratio 
cd OTratio 
mkdir $SECvar2 
cd $SECvar2 
mkdir $EPSvar2 
cd $EPSvar2
Dvar5=$(pwd)
cd $HOMdir 

cd $HOMdir
mkdir OTsetup 
cd OTsetup 
mkdir $SECvar2 
cd $SECvar2 
mkdir $EPSvar2 
cd $EPSvar2
Dvar6=$(pwd)
cd $HOMdir 

cd $HOMdir 
cd calc 
mkdir EUC 
cd EUC 
Dvar7=$(pwd)
mkdir $EPSvar2 
cd $HOMdir 

cd $HOMdir 
cd calc 
mkdir MINKBT 
cd MINKBT 
Dvar8=$(pwd)
mkdir $EPSvar2 
cd $HOMdir 

read -r -p "Do you want to change the order of the Taylor expansion? [y/N] " response
if [[ $response =~ ^([yY][eE][sS]|[yY])$ ]]
then
    echo -n "Enter the order of the Taylor expansion and press [ENTER] : "
read TAYvar1
else
    TAYvar1=4
fi

cd $HOMdir

#findThresholds
cp ThreshFindTemplate.m "ThreshFind${NAMEvar1}".m
sed -i "s~D2~$Dvar2~g" "ThreshFind${NAMEvar1}".m
sed -i "s~D4~$Dvar4~g" "ThreshFind${NAMEvar1}".m
sed -i "s~K2~$KINEvar2~g" "ThreshFind${NAMEvar1}".m
sed -i "s~K3~$KINEvar3~g" "ThreshFind${NAMEvar1}".m
sed -i "s~K4~$KINEvar4~g" "ThreshFind${NAMEvar1}".m
sed -i "s/F1/$FEYNvar1/g" "ThreshFind${NAMEvar1}".m
sed -i "s~S1~${#SECvar1[@]}~g" "ThreshFind${NAMEvar1}".m
math < "ThreshFind${NAMEvar1}".m
cd $Dvar4

#OT

if [ "$EUCtag" -gt 0 ] 
then
    cp TayIntTemplate.m "TayIntPart${NAMEvar1}".m
    cp TayIntCalcTemplate.m "TayIntCalc${NAMEvar1}".m
    sed -i  "s~D1~$Dvar1~g" "TayIntPart${NAMEvar1}".m
    sed -i  "s~D2~$Dvar2~g" "TayIntPart${NAMEvar1}".m
    sed -i  "s~D3~$Dvar3~g" "TayIntPart${NAMEvar1}".m
    sed -i  "s~D4~$Dvar4~g" "TayIntPart${NAMEvar1}".m
    sed -i  "s~D5~$Dvar5~g" "TayIntPart${NAMEvar1}".m
    sed -i  "s~D6~$Dvar6~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~E1~$EPSvar1~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~N1~$NAMEvar1~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K1~$KINEvar1~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K2~$KINEvar2~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K3~$KINEvar3~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K4~$KINEvar4~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K5~$KINEvar5~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K6~$KINEvar6~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~K7~$KINEvar7~g" "TayIntPart${NAMEvar1}".m
    sed -i "s/F1/$FEYNvar1/g" "TayIntPart${NAMEvar1}".m
    sed -i "s~S1~${#SECvar1[@]}~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~T1~$TAYvar1~g" "TayIntPart${NAMEvar1}".m
    sed -i "s~E1~$EPSvar1~g" "TayIntCalc${NAMEvar1}".m
    sed -i "s~N1~$NAMEvar1~g" "TayIntCalc${NAMEvar1}".m
    sed -i "s~S2~$SECvar2~g" "TayIntCalc${NAMEvar1}".m
    sed -i "s~D6~$Dvar6~g" "TayIntCalc${NAMEvar1}".m
    sed -i "s~D3~$Dvar3~g" "TayIntCalc${NAMEvar1}".m
    #math < "TayIntPart${NAMEvar1}".m
    #math < "TayIntCalc${NAMEvar1}".m
fi

#EUC

if [ "$EUCtag" -lt 0 ]
then
    cp TayIntEucTemplate.m "TayIntEuc${NAMEvar1}".m
    sed -i  "s~D1~$Dvar1~g" "TayIntEuc${NAMEvar1}".m
    sed -i  "s~D2~$Dvar2~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~D7~$Dvar7~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~E1~$EPSvar1~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~N1~$NAMEvar1~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K1~$KINEvar1~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K2~$KINEvar2~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K3~$KINEvar3~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K4~$KINEvar4~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K5~$KINEvar5~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K6~$KINEvar6~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~K7~$KINEvar7~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~F1~$FEYNvar1~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~S1~${#SECvar1[@]}~g" "TayIntEuc${NAMEvar1}".m
    sed -i "s~T1~$TAYvar1~g" "TayIntEuc${NAMEvar1}".m
    #math < "TayIntEuc${NAMEvar1}".m
fi
